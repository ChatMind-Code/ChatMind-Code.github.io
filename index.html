<!DOCTYPE html>
<html>
  <head>
    <title>获取手机号码和验证码</title>
    <style>
      /* 调整页面布局 */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: Arial, Helvetica, sans-serif;
        padding: 20px;
      }

      button {
        width: 150px;
        height: 40px;
        border: none;
        border-radius: 4px;
        background-color: #4CAF50;
        color: #fff;
        font-size: 16px;
        cursor: pointer;
        margin: 10px;
      }

      button:disabled {
        background-color: #ddd;
        cursor: not-allowed;
      }

      div {
        margin: 10px;
      }

      span {
        font-weight: bold;
        margin-right: 5px;
      }

      #phone-number, #verification-code {
        border: 1px solid #ddd;
        padding: 5px;
        margin-left: 5px;
      }

      /* 调整页面颜色 */
      body {
        background-color: #f7f7f7;
      }

      div, button {
        background-color: #fff;
      }
    </style>
  </head>
  <body>
    <!-- 获取手机号码按钮 -->
    <button id="get-number-button">获取手机号码</button>

    <!-- 显示获取到的手机号码 -->
    <div>
      <span>手机号码：</span>
      <span id="phone-number"></span>
    </div>

    <!-- 获取验证码按钮 -->
    <button id="get-code-button" disabled>获取验证码</button>

    <!-- 显示获取到的验证码 -->
    <div>
      <span>验证码：</span>
      <span id="verification-code"></span>
    </div>

    <!-- 引入 JavaScript 代码 -->
    <script type="text/javascript">
      // 获取相关 DOM 元素
      let numberButton = document.getElementById("get-number-button");
      let codeButton = document.getElementById("get-code-button");
      let phoneNumberElement = document.getElementById("phone-number");
      let verificationCodeElement = document.getElementById("verification-code");
      let phoneNumber = null;

      // 监听获取手机号码按钮的点击事件
      numberButton.addEventListener("click", function() {
        // 发送请求到后端获取手机号码
        let xhr = new XMLHttpRequest();
        xhr.open("GET", "/get_phone_number");

        xhr.onload = function() {
          if (xhr.status === 200) {
            // 获取手机号码成功，显示在页面中
            let response = JSON.parse(xhr.responseText);
            phoneNumber = response.phone_number;
            phoneNumberElement.textContent = phoneNumber;
            codeButton.disabled = false;
          } else {
            // 获取手机号码失败，显示错误信息
            alert("获取手机号码失败，请稍后重试");
          }
        };

        xhr.send();
      });

      // 监听获取验证码按钮的点击事件
      codeButton.addEventListener("click", function() {
        // 发送请求到后端获取验证码
        let xhr = new XMLHttpRequest();
        xhr.open("GET", "/get_verification_code?phone_number=" + phoneNumber);

        xhr.onload = function() {
          if (xhr.status === 200) {
            // 获取验证码成功，显示在页面中
            let response = JSON.parse(xhr.responseText);
            let verificationCode = response.verification_code;
            verificationCodeElement.textContent = verificationCode;
          } else {
            // 获取验证码失败，显示错误信息
            alert("获取验证码失败，请稍后重试");
          }
        };

        xhr.send();
      });
    </script>
  </body>
</html>
