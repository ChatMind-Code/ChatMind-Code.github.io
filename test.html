<!-- 获取手机号码按钮 -->
<button id="get-number-button">获取手机号码</button>

<!-- 显示获取到的手机号码 -->
<div>
    <span>手机号码：</span>
    <span id="phone-number"></span>
</div>

<!-- 获取验证码按钮 -->
<button id="get-code-button" disabled>获取验证码</button>

<!-- 显示获取到的验证码 -->
<div>
    <span>验证码：</span>
    <span id="verification-code"></span>
</div>

<script type="text/javascript">
    let numberButton = document.getElementById("get-number-button");
    let codeButton = document.getElementById("get-code-button");
    let phoneNumberElement = document.getElementById("phone-number");
    let verificationCodeElement = document.getElementById("verification-code");
    let phoneNumber = null;

    numberButton.addEventListener("click", function() {
        // 发送请求到后端获取手机号码
        let xhr = new XMLHttpRequest();
        xhr.open("GET", "/get_phone_number");

        xhr.onload = function() {
            if (xhr.status === 200) {
                // 获取手机号码成功，显示在页面中
                let response = JSON.parse(xhr.responseText);
                phoneNumber = response.phone_number;
                phoneNumberElement.textContent = phoneNumber;
                codeButton.disabled = false;
            } else {
                // 获取手机号码失败，显示错误信息
                alert("获取手机号码失败，请稍后重试");
            }
        };

        xhr.send();
    });

    codeButton.addEventListener("click", function() {
        // 发送请求到后端获取短信验证码
        let xhr = new XMLHttpRequest();
        xhr.open("GET", "/get_verification_code?phone_number=" + phoneNumber);

        xhr.onload = function() {
            if (xhr.status === 200) {
                // 获取验证码成功，显示在页面中
                let response = JSON.parse(xhr.responseText);
                let verificationCode = response.verification_code;
                verificationCodeElement.textContent = verificationCode;
            } else {
                // 获取验证码失败，显示错误信息
                alert("获取验证码失败，请稍后重试");
            }
        };

        xhr.send();
    });
</script>
